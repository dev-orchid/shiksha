{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Applications/Projects/school/shiksha-sms/src/lib/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from '@supabase/ssr'\nimport type { Database } from '@/types/database'\n\nexport function createClient() {\n  return createBrowserClient<Database>(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n  )\n}\n\n// Singleton instance for client-side usage\nlet browserClient: ReturnType<typeof createClient> | null = null\n\nexport function getSupabaseClient() {\n  if (!browserClient) {\n    browserClient = createClient()\n  }\n  return browserClient\n}\n"],"names":[],"mappings":";;;;;;AAKI;AALJ;AAAA;;AAGO,SAAS;IACd,OAAO,IAAA,oMAAmB;AAI5B;AAEA,2CAA2C;AAC3C,IAAI,gBAAwD;AAErD,SAAS;IACd,IAAI,CAAC,eAAe;QAClB,gBAAgB;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///Applications/Projects/school/shiksha-sms/src/components/providers/SessionProvider.tsx"],"sourcesContent":["'use client'\n\nimport { createContext, useContext, useEffect, useState } from 'react'\nimport { User } from '@supabase/supabase-js'\nimport { getSupabaseClient } from '@/lib/supabase/client'\n\ninterface UserProfile {\n  id: string\n  email: string\n  displayName: string\n  role: string\n  schoolId: string | null\n  schoolName: string | null\n  // Plan information\n  planType?: string\n  studentLimit?: number\n  adminUserLimit?: number\n  currentStudents?: number\n  currentAdminUsers?: number\n}\n\ninterface SessionContextType {\n  user: User | null\n  profile: UserProfile | null\n  loading: boolean\n  signOut: () => Promise<void>\n}\n\nconst SessionContext = createContext<SessionContextType>({\n  user: null,\n  profile: null,\n  loading: true,\n  signOut: async () => {},\n})\n\nexport function useSession() {\n  return useContext(SessionContext)\n}\n\ninterface SessionProviderProps {\n  children: React.ReactNode\n}\n\nexport function SessionProvider({ children }: SessionProviderProps) {\n  const [user, setUser] = useState<User | null>(null)\n  const [profile, setProfile] = useState<UserProfile | null>(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    const supabase = getSupabaseClient()\n\n    const fetchProfile = async (authUser: User) => {\n      // Fetch user profile\n      const { data } = await supabase\n        .from('users')\n        .select('id, email, role, school_id')\n        .eq('id', authUser.id)\n        .single()\n\n      const userData = data as { id: string; email: string; role: string; school_id: string | null } | null\n\n      // Get school_id from user record or fallback to auth metadata\n      const schoolId = userData?.school_id || authUser.user_metadata?.school_id || null\n\n      // Fetch school info and plan details if we have a school_id\n      let schoolName: string | null = null\n      let planType: string | undefined\n      let studentLimit: number | undefined\n      let adminUserLimit: number | undefined\n      let currentStudents: number | undefined\n      let currentAdminUsers: number | undefined\n\n      if (schoolId) {\n        // Fetch school name and plan info\n        const { data: schoolData } = await supabase\n          .from('schools')\n          .select('name, plan_type, student_limit, admin_user_limit')\n          .eq('id', schoolId)\n          .single()\n\n        schoolName = (schoolData as any)?.name ?? null\n        planType = (schoolData as any)?.plan_type\n        studentLimit = (schoolData as any)?.student_limit\n        adminUserLimit = (schoolData as any)?.admin_user_limit\n\n        // Fetch current usage stats\n        const { data: usageData } = await supabase\n          .rpc('get_school_current_usage', { p_school_id: schoolId })\n          .single()\n\n        currentStudents = (usageData as any)?.active_students || 0\n        currentAdminUsers = (usageData as any)?.admin_users || 0\n      }\n\n      // Get display name from user metadata, fall back to email prefix\n      const displayName = authUser.user_metadata?.display_name\n        || authUser.user_metadata?.full_name\n        || authUser.user_metadata?.name\n        || authUser.email?.split('@')[0]\n        || 'User'\n\n      if (userData) {\n        setProfile({\n          id: userData.id,\n          email: userData.email,\n          displayName: displayName,\n          role: userData.role,\n          schoolId: schoolId,\n          schoolName: schoolName,\n          planType,\n          studentLimit,\n          adminUserLimit,\n          currentStudents,\n          currentAdminUsers,\n        })\n      } else {\n        // Fallback to user_metadata if user record doesn't exist yet\n        setProfile({\n          id: authUser.id,\n          email: authUser.email || '',\n          displayName: displayName,\n          role: authUser.user_metadata?.role || 'user',\n          schoolId: schoolId,\n          schoolName: schoolName,\n          planType,\n          studentLimit,\n          adminUserLimit,\n          currentStudents,\n          currentAdminUsers,\n        })\n      }\n    }\n\n    // Get initial session\n    supabase.auth.getSession().then(({ data: { session } }) => {\n      const authUser = session?.user ?? null\n      setUser(authUser)\n      if (authUser) {\n        fetchProfile(authUser)\n      }\n      setLoading(false)\n    })\n\n    // Listen for auth changes\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange((_event, session) => {\n      const authUser = session?.user ?? null\n      setUser(authUser)\n      if (authUser) {\n        fetchProfile(authUser)\n      } else {\n        setProfile(null)\n      }\n      setLoading(false)\n    })\n\n    return () => subscription.unsubscribe()\n  }, [])\n\n  const signOut = async () => {\n    const supabase = getSupabaseClient()\n    await supabase.auth.signOut()\n    window.location.href = '/login'\n  }\n\n  return (\n    <SessionContext.Provider value={{ user, profile, loading, signOut }}>\n      {children}\n    </SessionContext.Provider>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":["file:///Applications/Projects/school/shiksha-sms/src/lib/utils/cn.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 204, "column": 0}, "map": {"version":3,"sources":["file:///Applications/Projects/school/shiksha-sms/src/lib/constants/roles.ts"],"sourcesContent":["export const ROLES = {\n  SUPER_ADMIN: 'super_admin',\n  ADMIN: 'admin',\n  PRINCIPAL: 'principal',\n  TEACHER: 'teacher',\n  ACCOUNTANT: 'accountant',\n  STUDENT: 'student',\n  PARENT: 'parent',\n} as const\n\nexport type Role = (typeof ROLES)[keyof typeof ROLES]\n\nexport const ROLE_LABELS: Record<Role, string> = {\n  [ROLES.SUPER_ADMIN]: 'Super Admin',\n  [ROLES.ADMIN]: 'Admin',\n  [ROLES.PRINCIPAL]: 'Principal',\n  [ROLES.TEACHER]: 'Teacher',\n  [ROLES.ACCOUNTANT]: 'Accountant',\n  [ROLES.STUDENT]: 'Student',\n  [ROLES.PARENT]: 'Parent',\n}\n\nexport const PERMISSIONS = {\n  // Student Management\n  STUDENTS_VIEW: 'students:view',\n  STUDENTS_CREATE: 'students:create',\n  STUDENTS_EDIT: 'students:edit',\n  STUDENTS_DELETE: 'students:delete',\n  STUDENTS_EXPORT: 'students:export',\n\n  // Teacher/Staff Management\n  TEACHERS_VIEW: 'teachers:view',\n  TEACHERS_CREATE: 'teachers:create',\n  TEACHERS_EDIT: 'teachers:edit',\n  TEACHERS_DELETE: 'teachers:delete',\n\n  STAFF_VIEW: 'staff:view',\n  STAFF_CREATE: 'staff:create',\n  STAFF_EDIT: 'staff:edit',\n  STAFF_DELETE: 'staff:delete',\n\n  // Attendance\n  ATTENDANCE_VIEW: 'attendance:view',\n  ATTENDANCE_VIEW_OWN: 'attendance:view:own',\n  ATTENDANCE_MARK: 'attendance:mark',\n  ATTENDANCE_EDIT: 'attendance:edit',\n  ATTENDANCE_REPORTS: 'attendance:reports',\n\n  // Fees\n  FEES_VIEW: 'fees:view',\n  FEES_VIEW_OWN: 'fees:view:own',\n  FEES_COLLECT: 'fees:collect',\n  FEES_MANAGE: 'fees:manage',\n  FEES_REPORTS: 'fees:reports',\n\n  // Exams\n  EXAMS_VIEW: 'exams:view',\n  EXAMS_VIEW_OWN: 'exams:view:own',\n  EXAMS_CREATE: 'exams:create',\n  EXAMS_RESULTS_ENTER: 'exams:results:enter',\n  EXAMS_RESULTS_VERIFY: 'exams:results:verify',\n\n  // Salary\n  SALARY_VIEW_OWN: 'salary:view:own',\n  SALARY_VIEW_ALL: 'salary:view:all',\n  SALARY_MANAGE: 'salary:manage',\n  SALARY_PROCESS: 'salary:process',\n\n  // Reports\n  REPORTS_VIEW: 'reports:view',\n  REPORTS_VIEW_OWN: 'reports:view:own',\n  REPORTS_GENERATE: 'reports:generate',\n\n  // WhatsApp\n  WHATSAPP_VIEW: 'whatsapp:view',\n  WHATSAPP_SEND: 'whatsapp:send',\n  WHATSAPP_MANAGE: 'whatsapp:manage',\n\n  // Settings\n  SETTINGS_VIEW: 'settings:view',\n  SETTINGS_MANAGE: 'settings:manage',\n  USERS_MANAGE: 'users:manage',\n\n  // Dashboard\n  DASHBOARD_VIEW: 'dashboard:view',\n  DASHBOARD_ADMIN: 'dashboard:admin',\n} as const\n\nexport type Permission = (typeof PERMISSIONS)[keyof typeof PERMISSIONS]\n\n// Role-Permission Mapping\nexport const ROLE_PERMISSIONS: Record<Role, Permission[]> = {\n  [ROLES.SUPER_ADMIN]: Object.values(PERMISSIONS),\n\n  [ROLES.ADMIN]: [\n    PERMISSIONS.DASHBOARD_VIEW,\n    PERMISSIONS.DASHBOARD_ADMIN,\n    PERMISSIONS.STUDENTS_VIEW,\n    PERMISSIONS.STUDENTS_CREATE,\n    PERMISSIONS.STUDENTS_EDIT,\n    PERMISSIONS.STUDENTS_DELETE,\n    PERMISSIONS.STUDENTS_EXPORT,\n    PERMISSIONS.TEACHERS_VIEW,\n    PERMISSIONS.TEACHERS_CREATE,\n    PERMISSIONS.TEACHERS_EDIT,\n    PERMISSIONS.TEACHERS_DELETE,\n    PERMISSIONS.STAFF_VIEW,\n    PERMISSIONS.STAFF_CREATE,\n    PERMISSIONS.STAFF_EDIT,\n    PERMISSIONS.STAFF_DELETE,\n    PERMISSIONS.ATTENDANCE_VIEW,\n    PERMISSIONS.ATTENDANCE_MARK,\n    PERMISSIONS.ATTENDANCE_EDIT,\n    PERMISSIONS.ATTENDANCE_REPORTS,\n    PERMISSIONS.FEES_VIEW,\n    PERMISSIONS.FEES_COLLECT,\n    PERMISSIONS.FEES_MANAGE,\n    PERMISSIONS.FEES_REPORTS,\n    PERMISSIONS.EXAMS_VIEW,\n    PERMISSIONS.EXAMS_CREATE,\n    PERMISSIONS.EXAMS_RESULTS_ENTER,\n    PERMISSIONS.EXAMS_RESULTS_VERIFY,\n    PERMISSIONS.SALARY_VIEW_ALL,\n    PERMISSIONS.SALARY_MANAGE,\n    PERMISSIONS.SALARY_PROCESS,\n    PERMISSIONS.REPORTS_VIEW,\n    PERMISSIONS.REPORTS_GENERATE,\n    PERMISSIONS.WHATSAPP_VIEW,\n    PERMISSIONS.WHATSAPP_SEND,\n    PERMISSIONS.WHATSAPP_MANAGE,\n    PERMISSIONS.SETTINGS_VIEW,\n    PERMISSIONS.SETTINGS_MANAGE,\n    PERMISSIONS.USERS_MANAGE,\n  ],\n\n  [ROLES.PRINCIPAL]: [\n    PERMISSIONS.DASHBOARD_VIEW,\n    PERMISSIONS.DASHBOARD_ADMIN,\n    PERMISSIONS.STUDENTS_VIEW,\n    PERMISSIONS.STUDENTS_EXPORT,\n    PERMISSIONS.TEACHERS_VIEW,\n    PERMISSIONS.STAFF_VIEW,\n    PERMISSIONS.ATTENDANCE_VIEW,\n    PERMISSIONS.ATTENDANCE_REPORTS,\n    PERMISSIONS.FEES_VIEW,\n    PERMISSIONS.FEES_REPORTS,\n    PERMISSIONS.EXAMS_VIEW,\n    PERMISSIONS.EXAMS_RESULTS_VERIFY,\n    PERMISSIONS.SALARY_VIEW_ALL,\n    PERMISSIONS.REPORTS_VIEW,\n    PERMISSIONS.REPORTS_GENERATE,\n    PERMISSIONS.WHATSAPP_VIEW,\n    PERMISSIONS.WHATSAPP_SEND,\n    PERMISSIONS.SETTINGS_VIEW,\n  ],\n\n  [ROLES.TEACHER]: [\n    PERMISSIONS.DASHBOARD_VIEW,\n    PERMISSIONS.STUDENTS_VIEW,\n    PERMISSIONS.ATTENDANCE_VIEW,\n    PERMISSIONS.ATTENDANCE_MARK,\n    PERMISSIONS.EXAMS_VIEW,\n    PERMISSIONS.EXAMS_RESULTS_ENTER,\n    PERMISSIONS.SALARY_VIEW_OWN,\n    PERMISSIONS.REPORTS_VIEW,\n  ],\n\n  [ROLES.ACCOUNTANT]: [\n    PERMISSIONS.DASHBOARD_VIEW,\n    PERMISSIONS.STUDENTS_VIEW,\n    PERMISSIONS.FEES_VIEW,\n    PERMISSIONS.FEES_COLLECT,\n    PERMISSIONS.FEES_MANAGE,\n    PERMISSIONS.FEES_REPORTS,\n    PERMISSIONS.SALARY_VIEW_ALL,\n    PERMISSIONS.SALARY_MANAGE,\n    PERMISSIONS.SALARY_PROCESS,\n  ],\n\n  [ROLES.STUDENT]: [\n    PERMISSIONS.DASHBOARD_VIEW,\n    PERMISSIONS.ATTENDANCE_VIEW_OWN,\n    PERMISSIONS.FEES_VIEW_OWN,\n    PERMISSIONS.EXAMS_VIEW_OWN,\n    PERMISSIONS.REPORTS_VIEW_OWN,\n  ],\n\n  [ROLES.PARENT]: [\n    PERMISSIONS.DASHBOARD_VIEW,\n    PERMISSIONS.ATTENDANCE_VIEW_OWN,\n    PERMISSIONS.FEES_VIEW_OWN,\n    PERMISSIONS.EXAMS_VIEW_OWN,\n    PERMISSIONS.REPORTS_VIEW_OWN,\n  ],\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 392, "column": 0}, "map": {"version":3,"sources":["file:///Applications/Projects/school/shiksha-sms/src/lib/utils/permissions.ts"],"sourcesContent":["'use client'\n\nimport { ROLE_PERMISSIONS, type Role, type Permission } from '@/lib/constants/roles'\n\nexport function hasPermission(userRole: string, permission: Permission): boolean {\n  const rolePermissions = ROLE_PERMISSIONS[userRole as Role]\n  if (!rolePermissions) return false\n\n  return rolePermissions.includes(permission)\n}\n\nexport function hasAnyPermission(userRole: string, permissions: Permission[]): boolean {\n  return permissions.some((permission) => hasPermission(userRole, permission))\n}\n\nexport function hasAllPermissions(userRole: string, permissions: Permission[]): boolean {\n  return permissions.every((permission) => hasPermission(userRole, permission))\n}\n\nexport function getPermissionsForRole(role: Role): Permission[] {\n  return ROLE_PERMISSIONS[role] || []\n}\n"],"names":[],"mappings":";;;;;;;;;;AAEA;AAFA;;AAIO,SAAS,cAAc,QAAgB,EAAE,UAAsB;IACpE,MAAM,kBAAkB,uJAAgB,CAAC,SAAiB;IAC1D,IAAI,CAAC,iBAAiB,OAAO;IAE7B,OAAO,gBAAgB,QAAQ,CAAC;AAClC;AAEO,SAAS,iBAAiB,QAAgB,EAAE,WAAyB;IAC1E,OAAO,YAAY,IAAI,CAAC,CAAC,aAAe,cAAc,UAAU;AAClE;AAEO,SAAS,kBAAkB,QAAgB,EAAE,WAAyB;IAC3E,OAAO,YAAY,KAAK,CAAC,CAAC,aAAe,cAAc,UAAU;AACnE;AAEO,SAAS,sBAAsB,IAAU;IAC9C,OAAO,uJAAgB,CAAC,KAAK,IAAI,EAAE;AACrC"}},
    {"offset": {"line": 426, "column": 0}, "map": {"version":3,"sources":["file:///Applications/Projects/school/shiksha-sms/src/hooks/usePermissions.ts"],"sourcesContent":["'use client'\n\nimport { useSession } from '@/components/providers/SessionProvider'\nimport { hasPermission, hasAnyPermission, hasAllPermissions } from '@/lib/utils/permissions'\nimport type { Permission } from '@/lib/constants/roles'\n\nexport function usePermissions() {\n  const { profile, user } = useSession()\n  const userRole = profile?.role\n\n  const can = (permission: Permission): boolean => {\n    if (!userRole) return false\n    return hasPermission(userRole, permission)\n  }\n\n  const canAny = (permissions: Permission[]): boolean => {\n    if (!userRole) return false\n    return hasAnyPermission(userRole, permissions)\n  }\n\n  const canAll = (permissions: Permission[]): boolean => {\n    if (!userRole) return false\n    return hasAllPermissions(userRole, permissions)\n  }\n\n  return {\n    can,\n    canAny,\n    canAll,\n    role: userRole,\n    isAuthenticated: !!user,\n  }\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;;AAHA;;;AAMO,SAAS;;IACd,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,IAAA,mKAAU;IACpC,MAAM,WAAW,SAAS;IAE1B,MAAM,MAAM,CAAC;QACX,IAAI,CAAC,UAAU,OAAO;QACtB,OAAO,IAAA,sJAAa,EAAC,UAAU;IACjC;IAEA,MAAM,SAAS,CAAC;QACd,IAAI,CAAC,UAAU,OAAO;QACtB,OAAO,IAAA,yJAAgB,EAAC,UAAU;IACpC;IAEA,MAAM,SAAS,CAAC;QACd,IAAI,CAAC,UAAU,OAAO;QACtB,OAAO,IAAA,0JAAiB,EAAC,UAAU;IACrC;IAEA,OAAO;QACL;QACA;QACA;QACA,MAAM;QACN,iBAAiB,CAAC,CAAC;IACrB;AACF;GA1BgB;;QACY,mKAAU"}},
    {"offset": {"line": 472, "column": 0}, "map": {"version":3,"sources":["file:///Applications/Projects/school/shiksha-sms/src/components/layout/DashboardSidebar.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport Link from 'next/link'\nimport { usePathname } from 'next/navigation'\nimport { cn } from '@/lib/utils/cn'\nimport { usePermissions } from '@/hooks/usePermissions'\nimport { PERMISSIONS } from '@/lib/constants/roles'\nimport {\n  LayoutDashboard,\n  Users,\n  GraduationCap,\n  UserCheck,\n  Calendar,\n  FileText,\n  IndianRupee,\n  Wallet,\n  MessageSquare,\n  Settings,\n  ChevronDown,\n  ChevronRight,\n  X,\n} from 'lucide-react'\n\ninterface NavItem {\n  label: string\n  href?: string\n  icon: React.ReactNode\n  permission?: string\n  children?: { label: string; href: string; permission?: string }[]\n}\n\nconst navigation: NavItem[] = [\n  {\n    label: 'Dashboard',\n    href: '/dashboard',\n    icon: <LayoutDashboard className=\"h-5 w-5\" />,\n    permission: PERMISSIONS.DASHBOARD_VIEW,\n  },\n  {\n    label: 'Students',\n    icon: <Users className=\"h-5 w-5\" />,\n    permission: PERMISSIONS.STUDENTS_VIEW,\n    children: [\n      { label: 'All Students', href: '/students' },\n      { label: 'Add Student', href: '/students/new', permission: PERMISSIONS.STUDENTS_CREATE },\n      { label: 'Bulk Import', href: '/students/import', permission: PERMISSIONS.STUDENTS_CREATE },\n    ],\n  },\n  {\n    label: 'Staff',\n    icon: <GraduationCap className=\"h-5 w-5\" />,\n    permission: PERMISSIONS.TEACHERS_VIEW,\n    children: [\n      { label: 'All Staff', href: '/teachers' },\n      { label: 'Add Staff', href: '/teachers/new', permission: PERMISSIONS.TEACHERS_CREATE },\n      { label: 'Assignments', href: '/teachers/assignments' },\n    ],\n  },\n  {\n    label: 'Attendance',\n    icon: <UserCheck className=\"h-5 w-5\" />,\n    permission: PERMISSIONS.ATTENDANCE_VIEW,\n    children: [\n      { label: 'Student Attendance', href: '/attendance/students' },\n      { label: 'Staff Attendance', href: '/attendance/staff' },\n      { label: 'Reports', href: '/attendance/reports', permission: PERMISSIONS.ATTENDANCE_REPORTS },\n    ],\n  },\n  {\n    label: 'Examinations',\n    icon: <FileText className=\"h-5 w-5\" />,\n    permission: PERMISSIONS.EXAMS_VIEW,\n    children: [\n      { label: 'All Exams', href: '/exams' },\n      { label: 'Create Exam', href: '/exams/new', permission: PERMISSIONS.EXAMS_CREATE },\n      { label: 'Results', href: '/exams/results' },\n      { label: 'Grade Settings', href: '/exams/grades' },\n    ],\n  },\n  {\n    label: 'Fees',\n    icon: <IndianRupee className=\"h-5 w-5\" />,\n    permission: PERMISSIONS.FEES_VIEW,\n    children: [\n      { label: 'Fee Collection', href: '/fees' },\n      { label: 'Fee Structure', href: '/fees/structure', permission: PERMISSIONS.FEES_MANAGE },\n      { label: 'Generate Invoices', href: '/fees/invoices', permission: PERMISSIONS.FEES_MANAGE },\n      { label: 'Pending Dues', href: '/fees/dues' },\n      { label: 'Reports', href: '/fees/reports', permission: PERMISSIONS.FEES_REPORTS },\n    ],\n  },\n  {\n    label: 'Salary',\n    icon: <Wallet className=\"h-5 w-5\" />,\n    permission: PERMISSIONS.SALARY_VIEW_ALL,\n    children: [\n      { label: 'Payroll', href: '/salary' },\n      { label: 'Salary Structure', href: '/salary/structure', permission: PERMISSIONS.SALARY_MANAGE },\n      { label: 'Process Payroll', href: '/salary/process', permission: PERMISSIONS.SALARY_PROCESS },\n      { label: 'Reports', href: '/salary/reports' },\n    ],\n  },\n  {\n    label: 'WhatsApp',\n    icon: <MessageSquare className=\"h-5 w-5\" />,\n    permission: PERMISSIONS.WHATSAPP_VIEW,\n    children: [\n      { label: 'Dashboard', href: '/whatsapp' },\n      { label: 'Send Message', href: '/whatsapp/send', permission: PERMISSIONS.WHATSAPP_SEND },\n      { label: 'Groups', href: '/whatsapp/groups' },\n      { label: 'Templates', href: '/whatsapp/templates', permission: PERMISSIONS.WHATSAPP_MANAGE },\n      { label: 'Message Logs', href: '/whatsapp/logs' },\n    ],\n  },\n  {\n    label: 'Settings',\n    icon: <Settings className=\"h-5 w-5\" />,\n    permission: PERMISSIONS.SETTINGS_VIEW,\n    children: [\n      { label: 'School Settings', href: '/settings' },\n      { label: 'Academic Year', href: '/settings/academic' },\n      { label: 'Classes & Sections', href: '/settings/classes' },\n      { label: 'Departments', href: '/settings/departments' },\n      { label: 'Events', href: '/events' },\n      { label: 'Event Types', href: '/settings/event-types' },\n      { label: 'Users', href: '/settings/users', permission: PERMISSIONS.USERS_MANAGE },\n    ],\n  },\n]\n\ninterface DashboardSidebarProps {\n  open: boolean\n  onClose: () => void\n}\n\nexport function DashboardSidebar({ open, onClose }: DashboardSidebarProps) {\n  const pathname = usePathname()\n  const { can } = usePermissions()\n  const [expandedItems, setExpandedItems] = useState<string[]>([])\n\n  const toggleExpanded = (label: string) => {\n    setExpandedItems((prev) =>\n      prev.includes(label)\n        ? prev.filter((item) => item !== label)\n        : [...prev, label]\n    )\n  }\n\n  const isActive = (href: string) => pathname === href\n  const isParentActive = (children?: { href: string }[]) =>\n    children?.some((child) => pathname === child.href)\n\n  const filteredNavigation = navigation.filter((item) => {\n    if (item.permission && !can(item.permission as any)) return false\n    return true\n  })\n\n  const sidebarContent = (\n    <div className=\"flex flex-col h-full\">\n      {/* Logo */}\n      <div className=\"flex items-center justify-between h-16 px-4 border-b border-gray-200\">\n        <Link href=\"/dashboard\" className=\"flex items-center gap-2\">\n          <div className=\"w-8 h-8 bg-primary rounded-lg flex items-center justify-center\">\n            <span className=\"text-white font-bold text-sm\">SMS</span>\n          </div>\n          <span className=\"font-semibold text-gray-900\">School MS</span>\n        </Link>\n        <button\n          onClick={onClose}\n          className=\"lg:hidden p-1 rounded-lg hover:bg-gray-100\"\n        >\n          <X className=\"h-5 w-5\" />\n        </button>\n      </div>\n\n      {/* Navigation */}\n      <nav className=\"flex-1 overflow-y-auto p-4 space-y-1\">\n        {filteredNavigation.map((item) => {\n          const hasChildren = item.children && item.children.length > 0\n          const isExpanded = expandedItems.includes(item.label) || isParentActive(item.children)\n\n          if (hasChildren) {\n            const visibleChildren = item.children!.filter(\n              (child) => !child.permission || can(child.permission as any)\n            )\n\n            if (visibleChildren.length === 0) return null\n\n            return (\n              <div key={item.label}>\n                <button\n                  onClick={() => toggleExpanded(item.label)}\n                  className={cn(\n                    'w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm font-medium transition-colors',\n                    isParentActive(item.children)\n                      ? 'bg-primary/10 text-primary'\n                      : 'text-gray-700 hover:bg-gray-100'\n                  )}\n                >\n                  <div className=\"flex items-center gap-3\">\n                    {item.icon}\n                    <span>{item.label}</span>\n                  </div>\n                  {isExpanded ? (\n                    <ChevronDown className=\"h-4 w-4\" />\n                  ) : (\n                    <ChevronRight className=\"h-4 w-4\" />\n                  )}\n                </button>\n                {isExpanded && (\n                  <div className=\"mt-1 ml-4 pl-4 border-l border-gray-200 space-y-1\">\n                    {visibleChildren.map((child) => (\n                      <Link\n                        key={child.href}\n                        href={child.href}\n                        onClick={onClose}\n                        className={cn(\n                          'block px-3 py-2 rounded-lg text-sm transition-colors',\n                          isActive(child.href)\n                            ? 'bg-primary text-white'\n                            : 'text-gray-600 hover:bg-gray-100'\n                        )}\n                      >\n                        {child.label}\n                      </Link>\n                    ))}\n                  </div>\n                )}\n              </div>\n            )\n          }\n\n          return (\n            <Link\n              key={item.label}\n              href={item.href!}\n              onClick={onClose}\n              className={cn(\n                'flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors',\n                isActive(item.href!)\n                  ? 'bg-primary text-white'\n                  : 'text-gray-700 hover:bg-gray-100'\n              )}\n            >\n              {item.icon}\n              <span>{item.label}</span>\n            </Link>\n          )\n        })}\n      </nav>\n    </div>\n  )\n\n  return (\n    <>\n      {/* Mobile overlay */}\n      {open && (\n        <div\n          className=\"fixed inset-0 bg-black/50 z-40 lg:hidden\"\n          onClick={onClose}\n        />\n      )}\n\n      {/* Sidebar */}\n      <aside\n        className={cn(\n          'fixed top-0 left-0 z-50 h-full w-64 bg-white border-r border-gray-200 transition-transform lg:translate-x-0 lg:static lg:z-auto',\n          open ? 'translate-x-0' : '-translate-x-full'\n        )}\n      >\n        {sidebarContent}\n      </aside>\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 991, "column": 0}, "map": {"version":3,"sources":["file:///Applications/Projects/school/shiksha-sms/src/components/layout/DashboardHeader.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useSession } from '@/components/providers/SessionProvider'\nimport Link from 'next/link'\nimport { ROLE_LABELS } from '@/lib/constants/roles'\nimport {\n  Menu,\n  Bell,\n  Search,\n  ChevronDown,\n  User,\n  Settings,\n  LogOut,\n} from 'lucide-react'\n\ninterface DashboardHeaderProps {\n  onMenuClick: () => void\n}\n\nexport function DashboardHeader({ onMenuClick }: DashboardHeaderProps) {\n  const { profile, signOut } = useSession()\n  const [showUserMenu, setShowUserMenu] = useState(false)\n  const [showNotifications, setShowNotifications] = useState(false)\n\n  const roleLabel = profile?.role ? ROLE_LABELS[profile.role as keyof typeof ROLE_LABELS] : ''\n\n  return (\n    <header className=\"sticky top-0 z-30 bg-white border-b border-gray-200\">\n      <div className=\"flex items-center justify-between h-16 px-4 lg:px-6\">\n        {/* Left side */}\n        <div className=\"flex items-center gap-4\">\n          <button\n            onClick={onMenuClick}\n            className=\"p-2 rounded-lg hover:bg-gray-100 lg:hidden\"\n          >\n            <Menu className=\"h-5 w-5\" />\n          </button>\n\n          {/* School name */}\n          {profile?.schoolName && (\n            <div className=\"hidden sm:block\">\n              <span className=\"text-sm font-medium text-gray-900\">\n                {profile.schoolName}\n              </span>\n            </div>\n          )}\n        </div>\n\n        {/* Right side */}\n        <div className=\"flex items-center gap-2\">\n          {/* Search */}\n          <button className=\"p-2 rounded-lg hover:bg-gray-100\">\n            <Search className=\"h-5 w-5 text-gray-500\" />\n          </button>\n\n          {/* Notifications */}\n          <div className=\"relative\">\n            <button\n              onClick={() => setShowNotifications(!showNotifications)}\n              className=\"p-2 rounded-lg hover:bg-gray-100 relative\"\n            >\n              <Bell className=\"h-5 w-5 text-gray-500\" />\n              <span className=\"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full\" />\n            </button>\n\n            {showNotifications && (\n              <>\n                <div\n                  className=\"fixed inset-0 z-10\"\n                  onClick={() => setShowNotifications(false)}\n                />\n                <div className=\"absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-lg border border-gray-200 z-20\">\n                  <div className=\"px-4 py-3 border-b border-gray-200\">\n                    <h3 className=\"font-semibold text-gray-900\">Notifications</h3>\n                  </div>\n                  <div className=\"p-4 text-center text-sm text-gray-500\">\n                    No new notifications\n                  </div>\n                </div>\n              </>\n            )}\n          </div>\n\n          {/* User menu */}\n          <div className=\"relative\">\n            <button\n              onClick={() => setShowUserMenu(!showUserMenu)}\n              className=\"flex items-center gap-2 p-2 rounded-lg hover:bg-gray-100\"\n            >\n              <div className=\"w-8 h-8 bg-primary rounded-full flex items-center justify-center\">\n                <span className=\"text-white text-sm font-medium\">\n                  {profile?.displayName?.charAt(0).toUpperCase()}\n                </span>\n              </div>\n              <div className=\"hidden sm:block text-left\">\n                <p className=\"text-sm font-medium text-gray-900\">\n                  {profile?.displayName}\n                </p>\n                <p className=\"text-xs text-gray-500\">{roleLabel}</p>\n              </div>\n              <ChevronDown className=\"h-4 w-4 text-gray-500 hidden sm:block\" />\n            </button>\n\n            {showUserMenu && (\n              <>\n                <div\n                  className=\"fixed inset-0 z-10\"\n                  onClick={() => setShowUserMenu(false)}\n                />\n                <div className=\"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-lg border border-gray-200 z-20 py-1\">\n                  <div className=\"px-4 py-3 border-b border-gray-200\">\n                    <p className=\"text-sm font-medium text-gray-900\">\n                      {profile?.displayName}\n                    </p>\n                    <p className=\"text-xs text-gray-500\">{profile?.email}</p>\n                    <p className=\"text-xs text-gray-500 mt-0.5\">{roleLabel}</p>\n                  </div>\n                  <Link\n                    href=\"/profile\"\n                    className=\"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"\n                    onClick={() => setShowUserMenu(false)}\n                  >\n                    <User className=\"h-4 w-4\" />\n                    Profile\n                  </Link>\n                  <Link\n                    href=\"/settings\"\n                    className=\"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"\n                    onClick={() => setShowUserMenu(false)}\n                  >\n                    <Settings className=\"h-4 w-4\" />\n                    Settings\n                  </Link>\n                  <hr className=\"my-1\" />\n                  <button\n                    onClick={() => signOut()}\n                    className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50\"\n                  >\n                    <LogOut className=\"h-4 w-4\" />\n                    Sign out\n                  </button>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n    </header>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AANA;;;;;;AAoBO,SAAS,gBAAgB,EAAE,WAAW,EAAwB;;IACnE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,IAAA,mKAAU;IACvC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAAC;IAE3D,MAAM,YAAY,SAAS,OAAO,kJAAW,CAAC,QAAQ,IAAI,CAA6B,GAAG;IAE1F,qBACE,6LAAC;QAAO,WAAU;kBAChB,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,SAAS;4BACT,WAAU;sCAEV,cAAA,6LAAC,6MAAI;gCAAC,WAAU;;;;;;;;;;;wBAIjB,SAAS,4BACR,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCAAK,WAAU;0CACb,QAAQ,UAAU;;;;;;;;;;;;;;;;;8BAO3B,6LAAC;oBAAI,WAAU;;sCAEb,6LAAC;4BAAO,WAAU;sCAChB,cAAA,6LAAC,mNAAM;gCAAC,WAAU;;;;;;;;;;;sCAIpB,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,SAAS,IAAM,qBAAqB,CAAC;oCACrC,WAAU;;sDAEV,6LAAC,6MAAI;4CAAC,WAAU;;;;;;sDAChB,6LAAC;4CAAK,WAAU;;;;;;;;;;;;gCAGjB,mCACC;;sDACE,6LAAC;4CACC,WAAU;4CACV,SAAS,IAAM,qBAAqB;;;;;;sDAEtC,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAI,WAAU;8DACb,cAAA,6LAAC;wDAAG,WAAU;kEAA8B;;;;;;;;;;;8DAE9C,6LAAC;oDAAI,WAAU;8DAAwC;;;;;;;;;;;;;;;;;;;;sCAS/D,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,SAAS,IAAM,gBAAgB,CAAC;oCAChC,WAAU;;sDAEV,6LAAC;4CAAI,WAAU;sDACb,cAAA,6LAAC;gDAAK,WAAU;0DACb,SAAS,aAAa,OAAO,GAAG;;;;;;;;;;;sDAGrC,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAE,WAAU;8DACV,SAAS;;;;;;8DAEZ,6LAAC;oDAAE,WAAU;8DAAyB;;;;;;;;;;;;sDAExC,6LAAC,sOAAW;4CAAC,WAAU;;;;;;;;;;;;gCAGxB,8BACC;;sDACE,6LAAC;4CACC,WAAU;4CACV,SAAS,IAAM,gBAAgB;;;;;;sDAEjC,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAI,WAAU;;sEACb,6LAAC;4DAAE,WAAU;sEACV,SAAS;;;;;;sEAEZ,6LAAC;4DAAE,WAAU;sEAAyB,SAAS;;;;;;sEAC/C,6LAAC;4DAAE,WAAU;sEAAgC;;;;;;;;;;;;8DAE/C,6LAAC,0KAAI;oDACH,MAAK;oDACL,WAAU;oDACV,SAAS,IAAM,gBAAgB;;sEAE/B,6LAAC,6MAAI;4DAAC,WAAU;;;;;;wDAAY;;;;;;;8DAG9B,6LAAC,0KAAI;oDACH,MAAK;oDACL,WAAU;oDACV,SAAS,IAAM,gBAAgB;;sEAE/B,6LAAC,yNAAQ;4DAAC,WAAU;;;;;;wDAAY;;;;;;;8DAGlC,6LAAC;oDAAG,WAAU;;;;;;8DACd,6LAAC;oDACC,SAAS,IAAM;oDACf,WAAU;;sEAEV,6LAAC,uNAAM;4DAAC,WAAU;;;;;;wDAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWlD;GAlIgB;;QACe,mKAAU;;;KADzB"}},
    {"offset": {"line": 1375, "column": 0}, "map": {"version":3,"sources":["file:///Applications/Projects/school/shiksha-sms/src/components/layout/DashboardLayout.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { DashboardSidebar } from './DashboardSidebar'\nimport { DashboardHeader } from './DashboardHeader'\n\ninterface DashboardLayoutProps {\n  children: React.ReactNode\n}\n\nexport function DashboardLayout({ children }: DashboardLayoutProps) {\n  const [sidebarOpen, setSidebarOpen] = useState(false)\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"flex\">\n        {/* Sidebar */}\n        <DashboardSidebar\n          open={sidebarOpen}\n          onClose={() => setSidebarOpen(false)}\n        />\n\n        {/* Main content */}\n        <div className=\"flex-1 flex flex-col min-h-screen lg:ml-0\">\n          {/* Header */}\n          <DashboardHeader onMenuClick={() => setSidebarOpen(true)} />\n\n          {/* Page content */}\n          <main className=\"flex-1 p-4 lg:p-6\">{children}</main>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAUO,SAAS,gBAAgB,EAAE,QAAQ,EAAwB;;IAChE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAE/C,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC,uKAAgB;oBACf,MAAM;oBACN,SAAS,IAAM,eAAe;;;;;;8BAIhC,6LAAC;oBAAI,WAAU;;sCAEb,6LAAC,qKAAe;4BAAC,aAAa,IAAM,eAAe;;;;;;sCAGnD,6LAAC;4BAAK,WAAU;sCAAqB;;;;;;;;;;;;;;;;;;;;;;;AAK/C;GAvBgB;KAAA"}}]
}